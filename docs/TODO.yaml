version: 1
updated: 2025-09-21
owners:
  - team: sre-toolbox
  - ai: codex
workflow:
  cadence: "Review at the start of each Codex session and after major merges."
  notes:
    - "Mark finished items with status: done and keep a short completion summary."
    - "Document blockers directly on the task so future sessions can unblock them quickly."
areas:
  - id: apichecker-ui-improvements
    title: API Checker Toolkit UI Improvements
    summary: Improvements to the API Checker Toolkit UI for better user experience.
    tasks:
      - id: improve-design
        title: Move Response area to the right side for better visibility.
        status: done
        priority: high
        notes:
          - "Consider a two-column layout with Request on the left and Response on the right."
          - "Ensure History panel is still easily accessible. Consider a collapsible sidebar."
          - "2024-05-30: Response lives in a dedicated right column with a collapsible history panel and responsive single-column fallback."
      - id: enhance-error-messages
        title: Enhance error messages for better clarity.
        status: done
        priority: medium
        notes:
          - "2025-09-22: Added formatApiError helper with Vitest coverage so API Checker surfaces backend detail and network guidance in failure messages."
      - id: improve-navigation
        title: Improve navigation within the toolkit UI.
        status: backlog
        priority: low
      - id: add-user-guides
        title: Add user guides and tooltips for new users.
        status: backlog
        priority: low
  - id: toolkit-repository
    title: Community toolkit repository
    status: done
    priority: high
    summary: Establish a public repository for sharing and discovering toolkits.
    tasks:
      - id: public-repo-setup
        title: Set up a public GitHub repository for community-contributed toolkits.
        status: done
        priority: high
        notes:
          - "Need dedicated repository for this"
          - "Define contribution guidelines and a review process for submissions."
          - "Expose via github pages or similar for easy browsing."
          - "Provide zip of initial repository structure witha all defined elements"
          - "Should be codex-friendly with all relevant docs and elements"
          - "2025-09-21: Bootstrapped community repo scaffold and delivered toolkit-community-repo.zip for import."
      - id: toolkit-discovery
        title: Implement a discovery mechanism within the Toolbox UI to browse and install community toolkits.
        status: done
        priority: medium
        notes:
          - "Consider a marketplace-style interface for browsing available toolkits."
          - "Allow users to search, filter, and view details about each toolkit."
          - "Implement installation and update mechanisms that integrate with existing toolbox workflows."
          - "2025-09-22: Added community catalog endpoints, Admin → Toolkits discovery UI, env override, and docs for the sxmxc/ideal-octo-engine repository."
      - id: community-bundle-resolution
        title: Fix community bundle download URL resolution for repo-hosted bundles.
        status: done
        priority: high
        notes:
          - "2025-09-22: Catalog bundles served from toolkits/<slug>/bundle on https://sxmxc.github.io/ideal-octo-engine/ return HTTP 400 because resolution preserves the catalog/ prefix."
          - "Ensure installs support bundles generated at repository roots without requiring catalog manifest changes."
          - "2025-09-22: Updated resolver to treat GitHub raw manifests as catalog definitions and prefer github.io bundle URLs, with fallbacks to manifest directory."
          - "2025-09-22: Hardened bundle writes to handle cross-device rename errors in containerised deployments."
          - "2025-09-22: Added automatic `.zip` variant resolution for bundle URLs published without an extension."
          - "2025-09-22: Detect non-zip responses from bundle endpoints and continue trying fallbacks to avoid 400 errors when WSGI apps return HTML."
  - id: toolkit-updates
    title: Toolkit updates & versioning
    status: backlog
    priority: high
    summary: Manage toolkit versions and provide update notifications.
    blockers:
      - "Requires completion of the toolkit repository setup task."
    tasks:
      - id: versioning-scheme
        title: Define a versioning scheme for toolkits (e.g., semantic versioning).
        status: done
        priority: high
        notes:
          - "Establish guidelines for version increments based on changes (major, minor, patch)."
          - "Document the versioning scheme in the toolkit repository."
          - "2024-10-25: Toolkits now persist manifest-provided versions and surface them in the UI; formal documentation of the scheme remains outstanding."
          - "2025-09-25: Authored toolkit versioning guide and linked it through authoring docs and release checklist."
      - id: update-notifications
        title: Implement a notification system within the Toolbox UI to alert users of available toolkit updates.
        status: done
        priority: high
        notes:
          - "Consider in-app notifications or a dedicated updates section."
          - "Provide details about the update, including changelog and impact."
          - "Allow users to easily initiate updates from the notification."
          - "2024-10-25: Admin → Toolkits overview now displays version badges, update availability, and catalog hints with automated polling."
      - id: update-mechanism
        title: Develop a mechanism to safely update installed toolkits.
        status: done
        priority: high
        notes:
          - "Ensure updates can be rolled back in case of issues."
          - "Consider version compatibility checks before applying updates."
          - "Document the update process for users."
          - "Allow upload of updated toolkit zips via the UI or API."
          - "Should validate the zip contents and version before applying."
          - "Should also support updates from the community repository."
          - "2024-10-25: Added /toolkits/{slug}/update endpoint reusing catalog installs with manifest version validation and audit logging; UI exposes one-click updates for community toolkits."
      - id: backport-toolkit-update-mechanism
        title: Backport the update mechanism to existing installations.
        status: backlog
        priority: medium
        notes:
          - "Assess the feasibility of integrating the update mechanism into current versions of the toolkits."
          - "Plan for a phased rollout to minimize disruption for existing users."
        blockers:
          - "Requires completion of the update mechanism task."
  - id: toolkit-sandbox
    title: Toolkit upload & execution
    summary: Hardening the toolkit install pipeline and pre-flight checks.
    tasks:
      - id: sandbox-build-validation
        title: Run toolkit build/test steps in an isolated workspace before activation.
        status: backlog
        priority: low
        notes:
          - "Explore disposable containers or ephemeral directories to contain untrusted archives."
          - "Capture findings in the journal and propose automation in backend/toolkit installer if feasible."
  - id: auth-hardening
    title: Authentication & secrets
    summary: Protect credentials and tighten auth flows.
    tasks:
      - id: jwt-secret-enforcement
        title: Enforce non-default JWT secrets or require asymmetric keys at startup.
        status: done
        priority: high
        notes:
          - "Ensure docker-compose and documentation guide operators toward secure secrets."
          - "2025-09-21: Added startup validation rejecting placeholder or short secrets and documented the requirement; asymmetric modes now require key pairs."
      - id: token-assertions
        title: Add token_use / typ assertions when refreshing tokens to prevent replay.
        status: done
        priority: medium
        notes:
          - "2025-09-25: Adding refresh claim validation in AuthService with regression coverage."
          - "2025-10-01: Promoted decode_token to module scope, refreshed AuthService guard, and added async tests verifying failure and success paths."
      - id: login-throttling
        title: Implement login throttling / lockout for the local provider and emit audit logs.
        status: done
        priority: medium
        notes:
          - "2025-10-03: Added Redis-backed throttling with configurable thresholds, audit entries, HTTP 429 lockouts, and regression tests."
      - id: browser-storage-hardening
        title: Keep access tokens out of localStorage; rely on httpOnly refresh cookies or in-memory storage.
        status: backlog
        priority: medium
  - id: infra-tooling
    title: Infrastructure & tooling
    summary: Tighten local and production defaults.
    tasks:
      - id: bootstrap-stack-helper
        title: Automate docker-compose and Vault bootstrap with an idempotent helper script.
        status: done
        priority: high
        notes:
          - "2025-09-21: Added bootstrap-stack.sh to start core containers, initialise Vault once, and seed placeholder secrets without overwriting existing data."
      - id: remove-default-postgres-creds
        title: Remove default Postgres credentials from docker-compose and require overrides.
        status: done
        priority: medium
        notes:
          - "Consider interactive prompts or environment validation in tooling scripts."
          - "2025-09-21: Removing docker-compose defaults and updating docs to require operator-supplied credentials."
          - "2025-09-21: Added bootstrap preflight that rejects placeholder Postgres credentials and refreshed onboarding docs."
      - id: bootstrap-dotenv-parser
        title: Allow bootstrap helper to parse .env values with spaces.
        status: done
        priority: medium
        notes:
          - "2025-09-22: Replaced shell sourcing with a Python parser so unquoted values and inline comments load correctly; pytest coverage guards the parser."
          - "2025-09-24: Added ${VAR} interpolation support so shared secrets only need to be defined once per .env file."

  - id: codex-automation
    title: Codex automation support
    summary: Keep Codex prompts, playbooks, and reference docs accurate.
    tasks:
      - id: toolkit-runtime-docs
        title: Document toolkit runtime helpers and integration points.
        status: done
        priority: high
        notes:
          - "Explain toolkit_runtime modules (redis, jobs, worker) and how toolkits consume them."
          - "Cover environment configuration, job lifecycle, and registration hooks."
          - "2025-09-24: Authored docs/toolkit-runtime.md and linked it from runtime, architecture, authoring, and README references."
      - id: codex-architecture-docs
        title: Document Toolbox architecture and schema for Codex agents.
        status: done
        priority: high
        notes:
          - "2025-09-21: Added `docs/toolbox-architecture.md` and `docs/toolbox-schema.md`; refreshed Codex prompts to reference them and removed obsolete scoring/correlation steps."
